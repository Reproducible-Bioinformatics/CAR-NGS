# CARN (Cross-platform Accessible Reproducible NGS) Project Overview

## Abstract:
The **CARN (Cross-platform Accessible Reproducible NGS)** tool represents a significant leap forward in the field of bioinformatics, addressing the urgent need for versatile and dependable tools that can handle the complexities of Next-Generation Sequencing (NGS) data. CARN is designed to facilitate a comprehensive, reproducible, and accessible approach to NGS data analysis, ensuring consistency and accuracy across different computational platforms. By integrating state-of-the-art techniques for data processing, analysis, and visualization, CARN enables researchers to navigate the intricacies of genomic data with greater ease and confidence. Emphasizing user accessibility, CARN aims to democratize advanced genomic analysis, making it approachable for researchers of diverse backgrounds and computational skills. This abstract introduces the motivation, design principles, and key features of CARN, highlighting its potential to transform genomic research through enhanced reproducibility, flexibility, and user engagement.

## Introduction:
Bioinformatics is crucial in modern biological research, interpreting complex data from advanced technologies. As the field continues to evolve, the necessity for robust, accessible, and efficient analytical tools has never been more pronounced. The demand for bioinformatics solutions is expanding, driven by the need to make sense of the vast datasets typical of today's research, from genomic sequences to single-cell analyses. A critical aspect of this evolution is the increasing need to make bioinformatics tools more user-friendly and universally accessible, ensuring that researchers across the globe, regardless of their computational expertise, can leverage these powerful technologies.

In response to these challenges, two significant workflows, R-CASC and docker4seq, have been developed, each addressing distinct needs within the bioinformatics community. R-CASC is primarily focused on the analysis of single-cell data, a field that has exploded in importance as researchers seek to understand the complexities at the cellular level. docker4seq, meanwhile, offers a suite of tools targeting a variety of other genomic analyses, each wrapped in Docker containers. The use of Docker is not merely a technical choice; it is a commitment to the reproducibility and reliability of computational research, ensuring that analyses can be replicated and verified across different systems and environments.

However, despite their robustness and versatility, these tools have limitations. A notable gap is their lack of compatibility with Windows operating systems, a barrier for a significant portion of the research community. Additionally, while Docker offers a powerful solution for reproducibility, it comes with a steep learning curve. Not every researcher is equipped with the knowledge or time to navigate these complexities.

In light of these challenges, our team has embarked on an ambitious project to combine the strengths of R-CASC and docker4seq into a single, comprehensive package. This new tool, which will be published on Bioconductor, is not just a merging of functionalities; it's a reimagining of bioinformatics workflows to adhere to the FAIR (Findable, Accessible, Interoperable, and Reusable) guiding principles. By doing so, we aim to lower the barriers to entry, making powerful genomic analyses more accessible to a broader range of scientists and thereby accelerating discovery and innovation.

## Discussion:
The development of CARN (Cross-platform Accessible Reproducible NGS) is a response to the growing need for comprehensive, end-to-end bioinformatics solutions that are both robust and user-friendly. This tool aims to provide a full analysis package for a wide array of NGS techniques including single-cell RNA-seq, bulk RNA-seq, whole genome sequencing, ATAC-seq, and TCR repertoire analysis. The innovative approach of using R as a front-end to call Docker containers that encapsulate all the specific software (e.g., Cell Ranger, BWE, etc.) ensures that each analysis step from the initial fastq files to the downstream analysis is streamlined and reproducible.

One of the core strengths of CARN lies in its use of CREDO to create Docker containers. CREDO is instrumental in generating containers that are not only 100% reproducible but also adhere to FAIR principles. This commitment to reproducibility and accessibility is a direct continuation of the philosophies underlying rCASC and docker4seq, where each function has its dedicated Docker container. Such design ensures that analyses are reproducible across any operating system and will continue to be so in the future.

A significant advancement in CARN is its compatibility with Windows, addressing a crucial gap in the bioinformatics tools landscape. R treats paths differently in Windows and has access to different system functions. In previous tools, functions implemented using the system command were only compatible with Linux and macOS. The function that manages the Docker call in CARN has been rewritten to ensure compatibility across Linux, Windows, and macOS. Moreover, it utilizes R functions that are so fundamental that even older versions of R are compatible, effectively removing dependency and version incompatibility issues. Notably, the only dependency for CARN is Docker itself, highlighting the simplicity of its installation and the comprehensive nature of its analysis capabilities.

The operational mechanism of CARN is both efficient and secure. It involves an R frontend that shares a temporary (scratch) folder with Docker. All data are copied into this folder, and the R frontend then launches the Docker with the shared folder to execute the function within Docker. Thus, all analysis is performed within Docker, and data are merely shared, ensuring that in the event of any issues, only the copied data are at risk, not the original files. Upon completion, results are copied back to the original folder, and the temporary folder is safely removed. This setup is paramount for data security and integrity.

Furthermore, CARN is now compatible within a Docker environment, meaning it can be installed on a Docker that launches other Dockers. This nested Docker functionality addresses the issue of path specification relative to the host or virtual machine, ensuring that CARN can operate seamlessly within a Dockerized environment.

Further enhancing our discussion on the distinctiveness of CARN, it is pertinent to note that, to our knowledge, no other tool currently offers the same level of accessibility and comprehensive, reproducible analysis from raw fastq files through the entire downstream analytical process. This aspect of CARN is particularly noteworthy as it democratizes complex genomic analyses, making them feasible for a broader range of researchers, including those who may not have extensive bioinformatics expertise.

The comprehensive nature of CARN's analysis pipeline addresses a significant gap in the field. While there are many tools available for specific aspects of NGS data analysis, the seamless integration of the entire workflow — from data preprocessing and quality control to complex analytical tasks like clustering, differential expression analysis, and variant calling — is uniquely encapsulated within CARN. This integration is achieved while maintaining a high standard of reproducibility and accuracy, ensuring that users can trust the results of their analyses.

Accessibility has been a guiding principle in the development of CARN. Recognizing the steep learning curve often associated with bioinformatics tools and the computational challenges of NGS data analysis, CARN has been designed with a user-centric approach. By simplifying the process and reducing the need for extensive bioinformatics knowledge or computational resources, CARN empowers researchers to focus more on the interpretation and implications of their data, rather than the intricacies of the analytical process.

Moreover, CARN's design ensures that even those new to NGS can navigate its comprehensive functionalities with ease. The tool's integration with Galaxy and StreamFlow further enhances its accessibility, providing a user-friendly interface and the ability to leverage cloud and HPC resources effectively. This approach not only broadens the potential user base but also facilitates collaborative and interdisciplinary research, where the insights and expertise of individuals from diverse backgrounds contribute to more innovative and comprehensive understandings of complex biological questions.

## Implementation:
### Galaxy Integration:
In the comparative landscape of bioinformatics tools, Galaxy stands out as a versatile platform offering a wide array of functionalities for computational research. The integration of rCASC into Galaxy as 'Galaxy-rCASC' has been a significant step, leveraging the advantages of Galaxy for a graphical user interface and remote server usage, enhancing the accessibility and applicability of rCASC for single-cell RNA-seq (scRNA-Seq) data analysis. Recognizing the benefits and success of this integration, we have extended the same approach to our new tool, CARN (Cross-platform Accessible Reproducible NGS).

CARN, structurally akin to rCASC and embodying the same principles of modular workflow and Docker containerization for reproducibility, has also been integrated into the Galaxy platform. This move is designed to harness the strengths of Galaxy for CARN, providing users with an accessible, efficient, and reproducible environment for Next Generation Sequencing data analysis. By reworking the functionalities of CARN to be independent from the original R package and developing appropriate Galaxy wrappers, we ensure that CARN benefits from the same level of integration, user-friendliness, and robustness as rCASC within Galaxy.

The integration of CARN into Galaxy addresses the critical need for tools that can be easily accessed and utilized by a broad spectrum of the research community, including those who might not have extensive computational expertise. It opens up possibilities for a wider range of analyses, facilitating more complex and comprehensive studies. Additionally, it ensures that analyses performed with CARN are reproducible and consistent across different environments and over time, an essential consideration in the fast-evolving field of bioinformatics.

### Streamflow Integration:
In addition to the successful integration of rCASC and subsequently CARN into Galaxy, we have taken strides to further enhance the accessibility and scalability of our tools by integrating with StreamFlow, a framework providing container-native runtime support for scientific workflows in cloud/HPC environments. This integration is particularly crucial for managing the heavy computational demands often associated with Next Generation Sequencing (NGS) data, especially when dealing with large datasets typical in single-cell RNA sequencing (scRNA-Seq) and other comprehensive genomic analyses.

StreamFlow's unique capability to manage complex, multi-container environments and execute tasks across distributed infrastructures makes it an ideal platform for enhancing the efficiency and scalability of CARN. By leveraging StreamFlow, CARN can efficiently orchestrate the cell subpopulation discovery functions and other NGS data analyses on cloud-HPC infrastructure, ensuring users benefit from high-performance computing resources. This is especially pertinent given the computational intensity of tasks such as clustering in scRNA-Seq data analysis, which can be optimally executed using the high-throughput and parallel computing capabilities provided by HPC environments.

The integration of CARN into StreamFlow also underscores our commitment to reproducibility and portability. StreamFlow's hybrid workflows paradigm, where workflow steps, deployment locations, and mapping relations are included in the same model, ensures that the entire execution environment is part of the workflow specification. This approach not only fosters reproducibility but also enhances the portability of CARN, allowing it to be deployed across various cloud and HPC environments seamlessly.

Furthermore, the use of StreamFlow aligns with our goal to make CARN as user-friendly and accessible as possible. StreamFlow's compatibility with external coordination semantics and well-known execution environments allows users to execute existing workflows on distributed infrastructures without needing to modify the underlying business logic. This means that researchers and analysts can adopt CARN for their NGS data analysis needs without facing steep learning curves typically associated with HPC and cloud computing.

## Comparative Analysis:
In the development and deployment of CARN, a crucial decision was selecting the most appropriate workflow management system to integrate with. After careful consideration, StreamFlow was chosen as the primary platform for its unique features that align well with the specific needs and goals of our tool. The rationale behind this decision is multifaceted, reflecting both the technical requirements of CARN and the desired outcomes for the end-user.

Firstly, StreamFlow offers robust container-native runtime support, which is integral to CARN's design philosophy. Given that each function in CARN is encapsulated within Docker containers to maximize reproducibility, StreamFlow's focus on managing complex, multi-container environments ensures that these workflows are executed efficiently and reliably across different computing infrastructures.

Secondly, the ability of StreamFlow to support hybrid workflows is particularly advantageous. CARN, designed to handle the intensive computational demands of NGS data, benefits from StreamFlow's capacity to seamlessly integrate cloud and HPC resources. This hybrid approach allows CARN to leverage the best of both worlds — the scalability and flexibility of cloud environments and the power and reliability of HPC systems.

Moreover, StreamFlow's emphasis on reproducibility and portability resonates with the core objectives of CARN. StreamFlow's methodology of including the entire execution environment in the workflow specification ensures that CARN analyses are not only reproducible but also easily portable to different computing environments, a feature crucial for widespread adoption and long-term utility.

The decision to integrate with StreamFlow also considers the complex and variable nature of NGS data analysis. StreamFlow's architecture and features are particularly suited to managing the diverse computational tasks required by CARN, from data preprocessing to complex clustering and downstream analysis. The framework's ability to manage data movements and execute distributed tasks efficiently is essential for handling the large datasets and intensive computations characteristic of NGS.

## Challenges and Limitations:
Some limitations in using CARN on Windows (such as path issues that cannot be simply copied and pasted) and in Docker (as more parameters need to be inserted than if used on Linux or macOS) are worth mentioning here. Perhaps a problem of space may also be encountered?

## Future Directions:
Creating scripts that automatically integrate StreamFlow and Galaxy. This would facilitate tool updates.

## Setup and Requirements:
Here we might simply write how easy it is to install it (devtools for the most up-to-date version or Bioconductor for the stable one) and the requirements for the various workflows.

## Conclusion:
In the rapidly advancing field of genomics, the CARN tool stands as a beacon of innovation and accessibility. It represents not just a culmination of technical advancements but also a commitment to the principles of open and reproducible science. By providing an end-to-end solution from raw fastq files to comprehensive downstream analysis, CARN addresses a significant need within the bioinformatics community for a tool that is both powerful and accessible to a broad range of researchers.

The integration of CARN into platforms like Galaxy and StreamFlow, coupled with its publication on Bioconductor, signifies a forward-thinking approach to tool development. These integrations ensure that CARN is not only user-friendly but also robust and scalable, capable of handling the diverse and often intensive computational demands of NGS data analysis. Moreover, by aligning with these platforms, CARN benefits from their respective communities, opening up avenues for collaboration, innovation, and continuous improvement.

CARN's development reflects a broader trend in the field of bioinformatics towards tools that are not only more sophisticated in their capabilities but also more attuned to the needs of researchers. It underscores the importance of accessibility, reproducibility, and community engagement in driving forward the field of genomic research. As the bioinformatics landscape continues to evolve, tools like CARN will play a crucial role in enabling researchers to unlock new insights and make meaningful contributions to our understanding of complex biological systems.

In conclusion, CARN represents a significant step forward in making comprehensive and reproducible NGS data analysis accessible to a wider audience. Its development is a testament to the collaborative spirit of the bioinformatics community and the collective pursuit of innovation and excellence in research. As CARN continues to evolve and be adopted by more users, it is poised to make a lasting impact on the field, facilitating groundbreaking discoveries and advancements in genomics and beyond.
